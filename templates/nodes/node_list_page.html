{% load staticfiles %}
{% load i18n %}
{% load humanize %}
{% load el_pagination_tags %}
{% load custom_tags %}

{% paginate nodes %}
{% for node in nodes %}

<a class="node-link" href="{% url 'nodes_detail' slug=node.slug %}">
<div class="node" id="{{node.slug}}">

  <div class="node-image-container">
    <div class="node-image" style="background-image:url('{% if node.thumbnail1 %}{{ media_url }}{{ node.thumbnail1}}{% else %}{% static "img/icons/thmb-default-" %}{{node.engine}}.png{% endif %}')" data-thumbnails="{% if node.thumbnail1 %}{{ media_url }}{{ node.thumbnail1}}{% else %}{% static "img/icons/thmb-default-" %}{{node.engine}}.png{% endif %},{% if node.thumbnail2 %}{{ media_url }}{{ node.thumbnail2}}{% else %}{% static "img/icons/thmb-default-" %}{{node.engine}}.png{% endif %},{% if node.thumbnail3 %}{{ media_url }}{{ node.thumbnail3}}{% else %}{% static "img/icons/thmb-default-" %}{{node.engine}}.png{% endif %},{% if node.thumbnail4 %}{{ media_url }}{{ node.thumbnail4}}{% else %}{% static "img/icons/thmb-default-" %}{{node.engine}}.png{% endif %}">
    </div>
    {% if node.created_at > max_day_new %}
      <div class="node-new-tag">
        {% trans 'New' %}
      </div>
    {% endif %}
  </div>

  <div class="controlbar">
    <div class="playstopbutton-container">
      <div class="playstopbutton-back">
        <svg viewBox="0 0 120 32" preserveAspectRatio="xMinYMin meet">
           <path  d="M102,22.8C91.6,12.4,81.2,1,63.5,0.8l0,0c-0.1,0-0.2,0-0.2,0c-0.1,0-0.2,0-0.2,0l0,0C45.3,1,35,12.4,24.5,22.8c-9,9-25,9-25,9H61h1.5H127C127,31.8,111,31.8,102,22.8z" style="stroke: none; fill:white;"></path>
          </svg>
      </div>
      <div class="nodetypebutton nodetypebutton-{% if node.engine == 'explot' %}{% if node.interactivity > 1 %}intpiece{% else %}video{% endif %}{% elif node.engine == 'html_page' %}html_page{% elif node.engine == 'game_matching' or node.engine == 'game_mapconv' or node.engine == 'game_pointnclick' or node.engine == 'game_multchoice' or node.engine == 'game_occupation' or node.engine == 'game_endlessrunner' or node.engine == 'game_fallingcategoriser' %}game{% endif %}">&nbsp;</div>
    </div>

    {% translated_node_title node as langtitle %}
    <div class="metadata">
      <h3 class="metadata-engine-type">
        {% for key, item in engine_choices.items %}
          {% if key == node.engine %}
              {{ item }}
          {% endif %}
        {% endfor %}

      </h3>
      <h2 class="metadata-title">{{ langtitle|truncatewords:9 }}</h2>
      <div class="metadata-extra">
        <div class="metadata-extra-user clearfix">
          <div class="metadata-extra-avatar" style="background-image:url('{{ media_url }}{{ node.owner.picture }}')"></div>
          <div class="metadata-extra-username">{{node.owner.name}}</div>
        </div>
        <div class="action-buttons">
          <ul class="action-buttons-items">
            <li class="action-buttons-first"><i class="fas fa-eye"></i> {{node.views}}</li>
            <li><i class="fas fa-heart"></i> {{node.likes}}</li>
            <!-- <li><i class="fas fa-share-alt"></i> {{node.shares}}</li> -->
          </ul>
        </div>
        <!-- <div class="metadata-extra-date">{{node.created_at|naturaltime}}</div> -->
      </div>
    </div>

  </div>
  </div>
</a>

{% endfor %}

{% show_more "Load more ..." "Loading ..." %}
<div class="clear"></div>
